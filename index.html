<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bang Jay !!! - Ojek Online Premium</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #000000;
            --secondary-color: #1a1a1a;
            --accent-color: #3a3a3a;
            --light-color: #333333;
            --gradient-bg: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            --success-color: #10b981;
            --text-color: #ffffff;
            --text-secondary: #b3b3b3;
            --card-bg: #1e1e1e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background: #121212;
            color: var(--text-color);
            line-height: 1.6;
        }

        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes confetti {
            0% { transform: translateY(-100%) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(360deg); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes glow {
            0% { box-shadow: 0 0 5px rgba(255, 255, 255, 0.1); }
            50% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.3); }
            100% { box-shadow: 0 0 5px rgba(255, 255, 255, 0.1); }
        }

        .container {
            max-width: 500px;
            margin: 0 auto;
            background: var(--secondary-color);
            min-height: 100vh;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            position: relative;
            overflow-x: hidden;
        }

        /* Login Modal */
        .login-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.5s ease;
        }

        .login-box {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            animation: slideDown 0.5s ease;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 10px 25px rgba(0,0,0,0.5);
        }

        .login-input {
            width: 100%;
            padding: 12px;
            margin: 1rem 0;
            border: 2px solid #333;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #2a2a2a;
            color: white;
        }

        .login-input:focus {
            border-color: var(--accent-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(58,58,58,0.3);
        }

        .btn {
            background: var(--gradient-bg);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            display: block;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 7px 20px rgba(0,0,0,0.4);
        }

        .btn:after {
            content: "";
            position: absolute;
            top: -50%;
            left: -60%;
            width: 200%;
            height: 200%;
            background: rgba(255,255,255,0.1);
            transform: rotate(30deg);
            transition: all 0.3s;
        }

        .btn:hover:after {
            left: 100%;
        }

        .btn-secondary {
            background: var(--card-bg);
            color: white;
            border: 2px solid var(--accent-color);
        }

        .welcome-banner {
            background: var(--gradient-bg);
            color: white;
            padding: 1.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            animation: slideDown 0.5s ease;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .welcome-banner::after {
            content: "🎉✨";
            position: absolute;
            font-size: 2rem;
            animation: confetti 2s linear infinite;
            opacity: 0.3;
        }

        .header {
            background: var(--gradient-bg);
            color: white;
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            position: relative;
            z-index: 10;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .logo-img {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            object-fit: cover;
            animation: pulse 2s infinite;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 1px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            background: linear-gradient(to right, #fff, #ccc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .tagline {
            font-size: 0.9rem;
            opacity: 0.8;
            color: var(--text-secondary);
        }

        .location-permission {
            background: var(--card-bg);
            margin: 1.5rem;
            padding: 1.2rem;
            border-radius: 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s ease;
            animation: slideDown 0.6s ease;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .driver-card {
            background: var(--card-bg);
            margin: 1rem 1.5rem;
            padding: 1.2rem;
            border-radius: 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            animation: slideDown 0.7s ease;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .menu-item {
            background: var(--card-bg);
            margin: 1rem 1.5rem;
            padding: 1.2rem;
            border-radius: 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            animation: slideDown 0.8s ease;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .menu-item:hover, .driver-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            border-color: rgba(255,255,255,0.1);
            background: #252525;
        }

        .menu-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 1.2rem;
            background: var(--gradient-bg);
            color: white;
            flex-shrink: 0;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .driver-avatar {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-right: 1.2rem;
            background: var(--gradient-bg);
            color: white;
            font-weight: bold;
            flex-shrink: 0;
            background-size: cover;
            background-position: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            border: 2px solid rgba(255,255,255,0.1);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background: var(--card-bg);
            width: 90%;
            max-width: 400px;
            border-radius: 20px;
            padding: 20px;
            animation: slideDown 0.3s ease;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 15px 35px rgba(0,0,0,0.5);
        }

        .modal-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
            color: white;
        }

        .modal-option {
            display: block;
            background: #2a2a2a;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 12px;
            text-align: center;
            font-weight: bold;
            text-decoration: none;
            color: white;
            border: 2px solid #333;
            transition: all 0.3s ease;
        }

        .modal-option:hover {
            background: var(--accent-color);
            border-color: var(--accent-color);
            transform: translateY(-3px);
        }

        .modal-close {
            background: #333;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 10px;
        }

        .modal-close:hover {
            background: #444;
        }

        .confetti {
            position: fixed;
            pointer-events: none;
            animation: confetti 2s linear forwards;
            z-index: 2000;
            font-size: 20px;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            background: rgba(16, 185, 129, 0.2);
            color: var(--success-color);
            padding: 4px 8px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--success-color);
        }

        .section-title {
            padding: 0 1.5rem;
            margin: 1.5rem 0 0.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            animation: fadeIn 0.5s ease;
        }

        .driver-info {
            flex-grow: 1;
        }

        .driver-name {
            font-size: 1.1rem;
            margin-bottom: 3px;
            color: white;
        }

        .driver-status {
            font-size: 0.9rem;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .menu-text h3 {
            font-size: 1.1rem;
            margin-bottom: 3px;
            color: white;
        }

        .menu-text p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .bounce {
            animation: bounce 1s infinite;
        }

        #selectedDriverName {
            font-weight: 700;
            text-shadow: 0 0 10px rgba(255,255,255,0.3);
        }

        /* Glow effect for active elements */
        .menu-item:active, .driver-card:active, .btn:active {
            transform: scale(0.98);
        }

        /* Store and Product Styles */
        .store-card, .product-card {
            background: var(--card-bg);
            margin: 1rem 1.5rem;
            padding: 1.2rem;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .store-card:hover, .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .store-header, .product-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .store-icon, .product-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 1.2rem;
            background: var(--gradient-bg);
            color: white;
            flex-shrink: 0;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .store-info h3, .product-info h3 {
            font-size: 1.1rem;
            margin-bottom: 3px;
            color: white;
        }

        .store-info p, .product-info p {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .product-image {
            width: 100%;
            border-radius: 10px;
            margin: 10px 0;
            height: 150px;
            object-fit: cover;
        }

        .product-price {
            font-weight: bold;
            color: white;
            margin: 10px 0;
        }

        /* Order Form Styles */
        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            color: white;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #333;
            border-radius: 10px;
            font-size: 16px;
            background: #2a2a2a;
            color: white;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            margin: 15px 0;
        }

        .quantity-btn {
            background: var(--gradient-bg);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 10px;
            font-size: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .quantity-value {
            margin: 0 15px;
            font-size: 18px;
            min-width: 30px;
            text-align: center;
        }

        .back-btn {
            background: #333;
            color: white;
            border: none;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 15px;
            cursor: pointer;
        }

        /* Hide sections initially */
        #storesSection, #productsSection, #orderFormSection {
            display: none;
        }

        /* Responsive adjustments */
        @media (max-width: 400px) {
            .store-header, .product-header {
                flex-direction: column;
                align-items: flex-start;
            }
            .store-icon, .product-icon {
                margin-right: 0;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Login Modal -->
    <div id="loginModal" class="login-modal">
        <div class="login-box">
            <div class="logo-container">
                <img src="https://img1.pixhost.to/images/5690/597684631_imgtmp.jpg" alt="BANG JAY Logo" class="logo-img">
                <div class="logo">BANG JAY!!</div>
            </div>
            <p style="margin: 1rem 0; color: var(--text-secondary);">Silakan masukkan nama Anda untuk mulai</p>
            <input type="text" id="userName" class="login-input" placeholder="Nama Lengkap Anda">
            <button onclick="handleLogin()" class="btn">MASUK</button>
        </div>
    </div>

    <div class="container">
        <!-- Welcome Banner -->
        <div id="welcomeBanner" class="welcome-banner" style="display: none;">
            <h2>Selamat Datang <span id="displayName"></span>! 🎋</h2>
            <p>Nikmati layanan ojek premium kami</p>
        </div>

        <div class="header">
            <div class="logo-container">
                <img src="https://img1.pixhost.to/images/5690/597684635_imgtmp.jpg" alt="BANG JAY Logo" class="logo-img">
                <div class="logo">BANG JAY!!</div>
            </div>
            <div class="tagline">Ojek Online Premium</div>
        </div>

        <div class="location-permission">
            <div class="menu-icon">📍</div>
            <div>
                <h3>Lokasi Anda</h3>
                <p>Mengambil lokasi...</p>
            </div>
        </div>

        <!-- Main Menu Section -->
        <div id="mainMenuSection">
            <div class="menu-item" id="ojekBtn">
                <div class="menu-icon">🏍</div>
                <div class="menu-text">
                    <h3>OJEK SEKARANG</h3>
                    <p>Pesan ojek langsung ke tujuan</p>
                </div>
            </div>

            <div class="menu-item" id="tokoBtn">
                <div class="menu-icon">🏪</div>
                <div class="menu-text">
                    <h3>PILIH TOKO</h3>
                    <p>Pilih toko belanja Anda</p>
                </div>
            </div>
        </div>

        <!-- Stores Section -->
        <div id="storesSection">
            <div class="section-title">
                <h3>Pilih Toko</h3>
                <button class="back-btn" onclick="backToMainMenu()">⬅ Kembali</button>
            </div>

            <div class="store-card" onclick="selectStore('cakra', 'Toko Cakra Tunggal', 'Jl. Cakra Tunggal, Labuan Mapin')">
                <div class="store-header">
                    <div class="store-icon">🛒</div>
                    <div class="store-info">
                        <h3>Toko Cakra Tunggal</h3>
                        <p>Jl. Cakra Tunggal, Labuan Mapin</p>
                    </div>
                </div>
            </div>

            <div class="store-card" onclick="selectStore('maju', 'Toko MAS YANTO BAKSO', 'Jl. Raya Mapin, Sumbawa')">
                <div class="store-header">
                    <div class="store-icon">🏪</div>
                    <div class="store-info">
                        <h3>Toko MAS YANTO BAKSO</h3>
                        <p>Jl. Raya Mapin, Sumbawa</p>
                    </div>
                </div>
            </div>
        </div>
        
                    <div class="store-card" onclick="selectStore('maju', 'Toko MAS WIN BAKSO', 'Jl. Raya Mapin, Sumbawa')">
                <div class="store-header">
                    <div class="store-icon">🏪</div>
                    <div class="store-info">
                        <h3>Toko MAS WIN BAKSO</h3>
                        <p>Jl. Raya Mapin, Sumbawa</p>
                    </div>
                </div>
            </div>
        </div>

                    <div class="store-card" onclick="selectStore('maju', 'RIKEN BUAH', 'Jl. Raya Mapin, Sumbawa')">
                <div class="store-header">
                    <div class="store-icon">🏪</div>
                    <div class="store-info">
                        <h3>RIKEN BUAH</h3>
                        <p>Jl. Raya Mapin, Sumbawa</p>
                    </div>
                </div>
            </div>
        </div>
        
                           <div class="store-card" onclick="selectStore('maju', 'RIKEN BUAH', 'Jl. Raya Mapin, Sumbawa')">
                <div class="store-header">
                    <div class="store-icon">🏪</div>
                    <div class="store-info">
                        <h3>WARUNG NASI MAS JO</h3>
                        <p>Jl. Raya Mapin, Sumbawa</p>
                    </div>
                </div>
            </div>
        </div>
        
                           <div class="store-card" onclick="selectStore('maju', 'RIKEN BUAH', 'Jl. Raya Mapin, Sumbawa')">
                <div class="store-header">
                    <div class="store-icon">🏪</div>
                    <div class="store-info">
                        <h3>LALAPAN TAMSI</h3>
                        <p>Jl. Raya Mapin, Sumbawa</p>
                    </div>
                </div>
            </div>
        </div>
        
        


        <!-- Products Section -->
        <div id="productsSection">
            <div class="section-title">
                <h3 id="storeTitle">Produk di Toko</h3>
                <button class="back-btn" onclick="backToStores()">⬅ Kembali ke Toko</button>
            </div>

            <div id="productsContainer">
                <!-- Products will be loaded here dynamically -->
            </div>
        </div>

        <!-- Order Form Section -->
        <div id="orderFormSection">
            <div class="section-title">
                <h3 id="productTitle">Pesan Produk</h3>
                <button class="back-btn" onclick="backToProducts()">⬅ Kembali ke Produk</button>
            </div>

            <div class="product-card">
                <div class="product-header">
                    <div class="product-icon">🛍️</div>
                    <div class="product-info">
                        <h3 id="selectedProductName">Produk</h3>
                        <p id="selectedStoreName">Toko</p>
                    </div>
                </div>
                <img id="selectedProductImage" src="" class="product-image" alt="Produk">
                <div class="product-price" id="selectedProductPrice">Rp 0</div>
            </div>

            <div style="margin: 1.5rem;">
                <div class="form-group">
                    <label class="form-label" for="customerName">Nama Anda</label>
                    <input type="text" id="customerName" class="form-input" placeholder="Nama lengkap">
                </div>

                <div class="form-group">
                    <label class="form-label" for="customerAddress">Alamat Pengiriman</label>
                    <input type="text" id="customerAddress" class="form-input" placeholder="Alamat lengkap">
                </div>

                <div class="form-group">
                    <label class="form-label">Jumlah</label>
                    <div class="quantity-control">
                        <button class="quantity-btn" onclick="changeQuantity(-1)">-</button>
                        <span class="quantity-value" id="quantity">1</span>
                        <button class="quantity-btn" onclick="changeQuantity(1)">+</button>
                    </div>
                </div>

                <button class="btn" onclick="showDriverSelection()">PILIH OJEK</button>
            </div>
        </div>

        <!-- Daftar Driver -->
        <div class="section-title" id="driversTitle">
            <h3>Driver Tersedia</h3>
        </div>

        <div class="driver-card" id="jayaNetDriver">
            <div class="driver-avatar" style="background-image: url('https://img1.pixhost.to/images/5690/597684631_imgtmp.jpg');">JN</div>
            <div class="driver-info">
                <div class="driver-name">JAYA NET</div>
                <div class="driver-status">
                    <span class="status-badge"><span class="status-dot"></span> Tersedia</span> • ayo berlangganan
                </div>
            </div>
            <div style="font-size: 24px;">🏍</div>
        </div>

        <!-- Modal Driver -->
        <div id="driverModal" class="modal">
            <div class="modal-content">
                <div class="modal-title">
                    Pilih Layanan dengan <br>
                    <span id="selectedDriverName" style="color: var(--text-color);">JAYA NET</span>
                </div>
                
                <a href="#" class="modal-option" id="waOjek">
                    <div>🏍 OJEK SEKARANG</div>
                    <small style="font-weight: normal; color: var(--text-secondary);">Antar langsung ke tujuan</small>
                </a>
                
                <a href="#" class="modal-option" id="waOrder">
                    <div>🛒 PESANAN ANDA</div>
                    <small style="font-weight: normal; color: var(--text-secondary);" id="orderSummary">Kirim pesanan ke driver</small>
                </a>
                
                <button class="modal-close" onclick="closeModal()">TUTUP</button>
            </div>
        </div>
    </div>

    <script>
        let userName = '';
        let currentDriver = {};
        let currentStore = {};
        let currentProduct = {};
        let quantity = 1;
        let orderData = {};

        // Sample product data
        const storeProducts = {
            cakra: [
                {
                    id: 1,
                    name: "Indomie Goreng",
                    price: 3000,
                    image: "https://img1.pixhost.to/images/5690/597684631_imgtmp.jpg",
                    description: "Indomie rasa ayam goreng"
                },
                {
                    id: 2,
                    name: "Aqua Gelas",
                    price: 500,
                    image: "https://img1.pixhost.to/images/5690/597684631_imgtmp.jpg",
                    description: "Air mineral kemasan gelas"
                },
                {
                    id: 3,
                    name: "Rokok Surya 12",
                    price: 18000,
                    image: "https://img1.pixhost.to/images/5690/597684631_imgtmp.jpg",
                    description: "Rokok filter kretek"
                }
            ],
            maju: [
                {
                    id: 1,
                    name: "Susu Ultra",
                    price: 5000,
                    image: "https://img1.pixhost.to/images/5690/597684631_imgtmp.jpg",
                    description: "Susu UHT rasa full cream"
                },
                {
                    id: 2,
                    name: "Kopi Kapal Api",
                    price: 1500,
                    image: "https://img1.pixhost.to/images/5690/597684631_imgtmp.jpg",
                    description: "Kopi bubuk kemasan sachet"
                }
            ]
        };

        // Preload images
        window.onload = function() {
            const img1 = new Image();
            img1.src = 'https://img1.pixhost.to/images/5690/597684631_imgtmp.jpg';
            
            // Start location detection
            setTimeout(() => {
                document.querySelector('.location-permission p').textContent = 'Jl. Cakra Tunggal, Labuan Mapin';
                document.querySelector('.location-permission').classList.add('bounce');
                setTimeout(() => {
                    document.querySelector('.location-permission').classList.remove('bounce');
                }, 1000);
            }, 2000);
        };

        function handleLogin() {
            userName = document.getElementById('userName').value.trim();
            if(!userName) return alert('Silakan masukkan nama Anda!');
            
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('welcomeBanner').style.display = 'block';
            document.getElementById('displayName').textContent = userName;
            
            // Add confetti effect
            createConfetti();
            
            // Animate menu items sequentially
            const menuItems = document.querySelectorAll('.menu-item, .driver-card');
            menuItems.forEach((item, index) => {
                setTimeout(() => {
                    item.style.animation = 'slideDown 0.5s ease';
                }, index * 100);
            });
        }

        function createConfetti() {
            for(let i = 0; i < 30; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.textContent = ['🎉', '✨', '🏍', '🛒'][Math.floor(Math.random()*4)];
                confetti.style.left = Math.random() * 100 + 'vw';
                confetti.style.animationDelay = Math.random() * 2 + 's';
                confetti.style.fontSize = (Math.random() * 20 + 15) + 'px';
                document.body.appendChild(confetti);
                setTimeout(() => confetti.remove(), 2000);
            }
        }

        // Store and Product Navigation
        document.getElementById('tokoBtn').addEventListener('click', function() {
            document.getElementById('mainMenuSection').style.display = 'none';
            document.getElementById('storesSection').style.display = 'block';
            document.getElementById('driversTitle').style.display = 'none';
            document.getElementById('jayaNetDriver').style.display = 'none';
        });

        function backToMainMenu() {
            document.getElementById('storesSection').style.display = 'none';
            document.getElementById('productsSection').style.display = 'none';
            document.getElementById('orderFormSection').style.display = 'none';
            document.getElementById('mainMenuSection').style.display = 'block';
            document.getElementById('driversTitle').style.display = 'block';
            document.getElementById('jayaNetDriver').style.display = 'flex';
        }

        function backToStores() {
            document.getElementById('productsSection').style.display = 'none';
            document.getElementById('orderFormSection').style.display = 'none';
            document.getElementById('storesSection').style.display = 'block';
        }

        function backToProducts() {
            document.getElementById('orderFormSection').style.display = 'none';
            document.getElementById('productsSection').style.display = 'block';
        }

        function selectStore(storeId, storeName, storeAddress) {
            currentStore = {
                id: storeId,
                name: storeName,
                address: storeAddress
            };
            
            document.getElementById('storeTitle').textContent = `Produk di ${storeName}`;
            document.getElementById('storesSection').style.display = 'none';
            document.getElementById('productsSection').style.display = 'block';
            
            // Load products for this store
            const productsContainer = document.getElementById('productsContainer');
            productsContainer.innerHTML = '';
            
            const products = storeProducts[storeId];
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.onclick = function() { selectProduct(product); };
                productCard.innerHTML = `
                    <div class="product-header">
                        <div class="product-icon">🛍️</div>
                        <div class="product-info">
                            <h3>${product.name}</h3>
                            <p>${storeName}</p>
                        </div>
                    </div>
                    <img src="${product.image}" class="product-image" alt="${product.name}">
                    <div class="product-price">Rp ${product.price.toLocaleString('id-ID')}</div>
                `;
                productsContainer.appendChild(productCard);
            });
        }

        function selectProduct(product) {
            currentProduct = product;
            quantity = 1;
            
            document.getElementById('productTitle').textContent = `Pesan ${product.name}`;
            document.getElementById('selectedProductName').textContent = product.name;
            document.getElementById('selectedStoreName').textContent = currentStore.name;
            document.getElementById('selectedProductImage').src = product.image;
            document.getElementById('selectedProductPrice').textContent = `Rp ${product.price.toLocaleString('id-ID')}`;
            document.getElementById('quantity').textContent = quantity;
            
            // Pre-fill customer name if available
            if (userName) {
                document.getElementById('customerName').value = userName;
            }
            
            document.getElementById('productsSection').style.display = 'none';
            document.getElementById('orderFormSection').style.display = 'block';
        }

        function changeQuantity(change) {
            quantity += change;
            if (quantity < 1) quantity = 1;
            document.getElementById('quantity').textContent = quantity;
        }

        function showDriverSelection() {
            const customerName = document.getElementById('customerName').value.trim();
            const customerAddress = document.getElementById('customerAddress').value.trim();
            
            if (!customerName) return alert('Silakan masukkan nama Anda!');
            if (!customerAddress) return alert('Silakan masukkan alamat pengiriman!');
            
            // Save order data
            orderData = {
                customerName: customerName,
                customerAddress: customerAddress,
                product: currentProduct,
                store: currentStore,
                quantity: quantity,
                totalPrice: currentProduct.price * quantity,
                timestamp: new Date().toLocaleString('id-ID')
            };
            
            // Update order summary
            document.getElementById('orderSummary').innerHTML = `
                ${currentProduct.name} (${quantity}x)<br>
                Total: Rp ${orderData.totalPrice.toLocaleString('id-ID')}
            `;
            
            // Show driver modal
            currentDriver = {
                name: "JAYA NET",
                number: '6281333267405'
            };
            
            document.getElementById('selectedDriverName').textContent = currentDriver.name;
            updateWAButtons();
            document.getElementById('driverModal').style.display = 'flex';
            createConfetti();
        }

        function updateWAButtons() {
            const message = `Assalamu'alaikum ${currentDriver.name}\nSaya ${orderData.customerName} ingin memesan:\n\n` +
                           `🔹 *Produk*: ${orderData.product.name}\n` +
                           `🔹 *Toko*: ${orderData.store.name} (${orderData.store.address})\n` +
                           `🔹 *Jumlah*: ${orderData.quantity}\n` +
                           `🔹 *Total Harga*: Rp ${orderData.totalPrice.toLocaleString('id-ID')}\n\n` +
                           `🔹 *Alamat Pengiriman*:\n${orderData.customerAddress}\n\n` +
                           `Mohon konfirmasi ketersediaan dan total biaya pengiriman. Terima kasih.`;
            
            document.getElementById('waOrder').href = `https://wa.me/${currentDriver.number}?text=${encodeURIComponent(message)}`;
            
            // Regular ojek service message
            document.getElementById('waOjek').href = `https://wa.me/${currentDriver.number}?text=${encodeURIComponent(
            `Assalamu'alaikum ${currentDriver.name}\nSaya ${userName || 'Pelanggan'} ingin menggunakan layanan:\n\n` +
                `Layanan: OJEK SEKARANG\nDari: (LOKASI ANDA)\nKe: (TUJUAN ANDA)`
            )}`;
        }

        // Driver Click Handler
        document.getElementById('jayaNetDriver').addEventListener('click', () => {
            currentDriver = {
                name: "JAYA NET",
                number: '6281333267405'
            };
            
            document.getElementById('selectedDriverName').textContent = currentDriver.name;
            updateWAButtons();
            document.getElementById('driverModal').style.display = 'flex';
            createConfetti();
        });

        function closeModal() {
            document.getElementById('driverModal').style.display = 'none';
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.className === 'modal') {
                closeModal();
            }
        }
    </script>
</body>
</html>